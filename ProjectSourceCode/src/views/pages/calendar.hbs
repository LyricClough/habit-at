{{> head}}

{{#unless hideNav}}
  {{> nav}}
{{/unless}}

<div class="container">
  <!-- Calendar Header -->
  <div class="row mt-4">
    <h1 class="col">Your Habit Calendar</h1>
    <button id="add-habit-btn" class="btn btn-primary">Add Habit</button>
  </div>

  <!-- Habit Modal -->
  <div class="modal fade" id="habitModal" tabindex="-1" role="dialog" aria-labelledby="habitModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="habitModalLabel">Add a New Habit</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form id="habit-form">
            <div class="form-group">
              <label for="habitName">Habit Name</label>
              <input type="text" class="form-control" id="habitName" required>
            </div>
            <div class="form-group">
              <label for="habitDescription">Description</label>
              <input type="text" class="form-control" id="habitDescription">
            </div>
            <div class="form-group">
              <label for="habitWeekday">Day of the Week</label>
              <select class="form-control" id="habitWeekday" required>
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
              </select>
            </div>
            <div class="form-group">
              <label for="habitTime">Time</label>
              <input type="number" class="form-control" id="habitTime" required>
            </div>
            <button type="submit" class="btn btn-primary">Save Habit</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Calendar Table -->
  <table class="table table-bordered mt-4">
    <thead>
      <tr>
        <th>Time</th>
        {{#each weekdays}}
          <th>{{this}}</th>
        {{/each}}
      </tr>
    </thead>
    <tbody>
      {{#each calendarData}}
        <tr>
          <td>{{@index}}</td> <!-- Hour (row index) -->
          {{#each this}}
            <td>
              {{#if this}}
                <!-- Display habit info if available -->
                <p>{{this.habit_name}}</p>
                <p>{{this.description}}</p>
              {{else}}
                <!-- Empty cell if no habit -->
                <p>No Habit</p>
              {{/if}}
            </td>
          {{/each}}
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>

{{> footer}}
